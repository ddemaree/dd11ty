---
import PostHeader from '@components/PostHeader.astro';
import Prose from '@components/Prose.astro';
import SiteLayout from '@layouts/SiteLayout.astro';

import { getSinglePost } from '@lib/wordpress';
import sanitizeHtml from '@lib/sanitizeHtml';

const { slug } = Astro.params;
const { error, post } = await getSinglePost(slug);

if(!post) {
	return new Response("Post not found", {
		status: 404,
		statusText: error
	})
}

const { title, content, excerpt, date, featuredImage } = post;

---
<SiteLayout title={title} description={excerpt} section="blog">
	<article class="content">
		<PostHeader title={title} subtitle={excerpt} date={date} image={featuredImage} />
		<Prose content={content} />
	</article>
</SiteLayout>