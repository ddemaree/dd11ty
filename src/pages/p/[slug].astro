---
import BaseHead from '@components/BaseHead.astro';
import SiteHeader from '@components/SiteHeader.astro';
import BlogPost from '@components/BlogPost.astro';
import Footer from '@components/Footer.astro';
import { getSinglePost } from '@lib/wordpress';

const { slug } = Astro.params;

const { post } = await getSinglePost(slug);

let title = post?.title;
let content = post?.content;
let description = post?.excerpt;
let date = post?.date;

if(!post) {
	return new Response("Post not found", {
		status: 404,
		statusText: "Post not found"
	})
}

---
<html lang="en">
	<head>
    <BaseHead title={title} description={description} />
	</head>
  
	<body>
    <SiteHeader />
		<div class="wrapper">
			<BlogPost title={title} date={date} subtitle={description}>
				<Fragment set:html={content} />
			</BlogPost>

			<Footer />
		</div>
	</body>
</html>
